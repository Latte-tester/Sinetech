name: Gradle Ã–nbellek Temizleyici

on:
  workflow_dispatch:  # Manuel tetikleme iÃ§in
  schedule:
    - cron: '0 0 * * 0'  # Her Pazar gÃ¼nÃ¼ gece yarÄ±sÄ± Ã§alÄ±ÅŸtÄ±r

jobs:
  clean-gradle-cache:
    runs-on: ubuntu-latest
    steps:
      - name: Repoyu Kontrol Et
        uses: actions/checkout@v4

      - name: JDK 17'yi Kur
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Gradle Ã–nbelleÄŸini Temizle
        run: |
          chmod +x ./gradlew

          ./gradlew clean
          ./gradlew cleanBuildCache
          rm -rf ~/.gradle/caches/
          rm -rf ~/.gradle/wrapper/
          rm -rf .gradle
          rm -rf */build
          git add .
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git config --global user.name "github-actions[bot]"
          git commit -m "ðŸ§¹ Gradle Ã¶nbelleÄŸi temizlendi" || echo "DeÄŸiÅŸiklik yok"
          git push